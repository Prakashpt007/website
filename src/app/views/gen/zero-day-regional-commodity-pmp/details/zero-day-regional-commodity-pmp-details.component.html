<div class="container-fluid p-0">
	<div class="row">
		<div class="col-12 col-sm-12 col-md-12 col-xxl-7 col-xl-7">
			<div class="row">
				<div class="col-12 col-sm-12 col-md-12 col-xxl-12 col-xl-12">
					<div class="card">

						<div class="card-header fw-bold bg-body-secondary bg-gradient d-flex justify-content-between">
							<span>Get Details</span>
						</div>
						<div class="card-body">
							<div class="row">
								@if (showFormBuilder) {

								<app-raw-formbuilder [componentData]="formData" [formErrorData]="formErrorData" (formBuilderSubmit)="getFormValuesFromBuilder($event)"></app-raw-formbuilder>

								}
							</div>
						</div>
					</div>
				</div>

				@if (newFormShow && !isListEmpty) {
				<div class="col-12 col-sm-12 col-md-12 col-xxl-auto col-xl-auto mt-4">
					<form [formGroup]="newDynamicForm" (ngSubmit)="dynamicFormSubmit()">
						<div class="card">

							<div class="card-header fw-bold bg-body-secondary bg-gradient d-flex justify-content-between">
								<span>Add/Update PMP Details</span>
							</div>
							<div class="card-body p-0">
								<div formArrayName="items">
									<table class="table w-100 m-0 table-bordered" style="vertical-align: middle;">
										<thead>
											<tr>
												<th>ID</th>
												<th>Delivery Date</th>
												<th>Price Paisa</th>
												<th>Type</th>
											</tr>
										</thead>
										<tbody>
											@for (item of items.controls; track $index;) {
											<tr [formGroupName]="$index">
												<td>{{ item.get('id')?.value }}</td>
												<td>{{ item.get('delivery_date')?.value | date:'dd, MMM-YYYY' }}</td>
												<td>
													<input type="number" class="form-control form-control-sm" formControlName="price_paisa" (keydown)="restrictInput($event)" [ngClass]="{'is-invalid': item.get('price_paisa')?.invalid && item.get('price_paisa')?.touched}" />

													<!-- Error Message[ngClass]="{'is-invalid': formSubmitHandler && f['email'].errors}" -->
													<!-- <div *ngIf="item.get('price_paisa')?.invalid && item.get('price_paisa')?.touched" class="error-message">
												Price is required and must be a valid number!
											</div> -->

													@if (item.get('price_paisa')?.invalid && item.get('price_paisa')?.touched) {
													<div class="invalid-feedback">
														<div>Price is required and must be a valid number!</div>
													</div>
													}
												</td>
												<td>
													<!-- {{ item.get('type')?.value }} -->
													<select class="form-select form-select-sm" formControlName="type" [ngClass]="{'is-invalid': item.get('type')?.invalid && item.get('type')?.touched}">
														<option disabled value="">Select Type</option>
														@for (item of typeOptions; track $index) {
														<option [value]="item">{{formatCamelCase(item)}}</option>
														}
													</select>

													@if (item.get('type')?.invalid && item.get('type')?.touched) {
													<div class="invalid-feedback">
														<div>Please Select Price Type</div>
													</div>
													}
												</td>
											</tr>
											}
										</tbody>
									</table>
								</div>
							</div>

							<div class="card-footer">
								<!-- <button type="submit" class="btn btn-sm btn-primary">Submit</button> -->
								<button type="submit" class="btn btn-primary btn-sm" [disabled]="!newDynamicForm.dirty || !submitBtnStatus">
									Submit
								</button>
							</div>
						</div>

					</form>
				</div>
				}


				@if (isListEmpty) {
				<div class="col-12">
					<p class="m-0 py-4 text-center"><i class="fa-regular fa-face-frown-open"></i> No Records Found...</p>
				</div>
				}
			</div>
		</div>

		<div class="col-lg-12 col-xxl-auto">
			<div class="orDividerVertical">
				<div class="col space"></div>
				<span class="col-auto px-2">OR</span>
				<div class="col space"></div>
			</div>

			<div class="orDivider">
				<div class="col space"></div>
				<span class="col-auto px-2">OR</span>
				<div class="col space"></div>
			</div>
		</div>

		<div class="col">
			<app-zero-day-regional-commodity-pmp-form />
		</div>
	</div>

</div>


<!-- 

<div class="d-sm-none d-xl-none col-xxl-auto d-xxl-block mb-4">
	<div class="vr h-100"></div>
</div>

<div class="col-xl-12 d-xl-block d-xxl-none mb-4">
	<hr />
</div> -->